---
title: "Analítica de datos aplicada a estudios sobre desarrollo"
subtitle: "Introducción a al paquete R"
author: "[Giovany Babativa, PhD](http://jgbabativam.rbind.io/)"
format: 
  gbabativa-revealjs:
    footer: "Diapositivas disponibles en [GitHub](https://github.com/jgbabativam)."
incremental: false
embed-resources: true
highlight-style: dracula
---

## Sobre Mi

<div style="text-align: justify;">

PhD en Estadística, MSc en Analytics & Big Data, MSc en Estadística. Con 20 años de experiencia, actual director de analítica en el CNC, miembro del comité de expertos en pobreza en el DANE y consultor de la División de Estadística de la CEPAL. Ex-decano de la Facultad de Estadística USTA, ex-director de operaciones en el ICFES, PM CEV ...

> Puedes encontrarme en:

- {{< ai google-scholar >}} [Google scholar](https://scholar.google.es/citations?user=2NJRNg8AAAAJ&hl=es)
- {{< fa brands github >}} [GitHub. https://github.com/jgbabativam](https://github.com/jgbabativam)
- {{< fa brands linkedin >}} [linkedin](https://www.linkedin.com/in/giovany-babativa-marquez/?originalSubdomain=co)
- {{< fa solid envelope >}} j.babativamarquez@uniandes.edu.co

</div>

# INTRODUCCIÓN AL PAQUETE R {background-color="#0077b6"}

## Proceso de analítica


```{r, out.width= '100%'}
knitr::include_graphics(here::here("images/Ciclo.png"))
```
[Wickham, H. y otros (2023)](https://r4ds.hadley.nz/)

## Trabajando con R

![](images/trabR.png){fig-align="center"}

## El entorno `tidyverse`

![](images/tidyverse.png){fig-align="center"}

## Flujo de trabajo

![](images/tidyverse2.png){fig-align="center"}

## Flujo de trabajo

```{r, out.width= '100%', fig.align='center'}
knitr::include_graphics(here::here("images/workflowschematic.jpeg"))
```

[Arkie Owen](https://communicate-data-with-r.netlify.app/docs/baser/workingprojects/)

## Organización y proyectos en R

Objetivo: proyectos reproducibles y replicables en entornos colaborativos.

![](images/projects.png){fig-align="center"}
<span style="font-size:70%;">[Allison Horst](https://allisonhorst.com/r-packages-functions/)</span>

## Organización y proyectos en R

* Facilita entornos colaborativos - reproducible y replicable
* Evite la asignación de rutas de trabajo `setwd(mi/ruta/)`
* Cree un R-project y solo revise `getwd()`
* Organice su espacio de trabajo:

```{r, out.width = '25%', fig.align='center'}
knitr::include_graphics(here::here("images/FlujoGB.png"))
```

## Entorno de R Studio

```{r, out.width= '100%', fig.align='center'}
knitr::include_graphics(here::here("images/entorno.png"))
```

[Hadley Wickham](https://r4ds.hadley.nz/workflow-scripts.html)

## Flujo de trabajo

Organice sus scripts por tareas de manera ordenada hasta obtener los resultados.

```{r, out.width= '100%', fig.align='center'}
knitr::include_graphics(here::here("images/workflow.jpg"))
```

<span style="font-size:70%;">[Allison Horst](https://allisonhorst.com/other-r-fun/)</span>


## Reglas de los datos

<br><br>

![](images/reglas.png){fig-align="center"}

## Formas básicas

* Asignación: `objeto <- valor`

```{r}
#| eval: false
#| echo: true

x <- 3*4             # Numérico
y <- "Hola a tod@s"  # Cadena
```

. . .

* Funciones: `Nombre_Funcion(arg1 = val1, arg2 = val2,...)`

```{r}
#| eval: false
#| echo: true

z <- seq(1, 10)      # Vector
hoy <- date()        # Fecha
```

. . . 

* Ayuda: `help(Nombre_Funcion)` o `?Nombre_Funcion`

```{r}
#| eval: false
#| echo: true

?seq
?read.csv
```

## Importar

Hay diferentes paquetes que permiten leer y escribir diversos formatos de datos

* `haven`: Stata, SPSS, SAS
* `readxl` y `writexl`
* `arrow`, `data.table`, ...

## Importar

* `haven -> Stata` : 
```{r}
#| eval: false
#| echo: true

require(haven)
leer_datos_STATA <- read_stata("ruta/tu_archivo_en_stata.dta")
```


* `haven -> SPSS` : 
```{r}
#| eval: false
#| echo: true

require(haven)
leer_datos_SPSS <- read_sav("ruta/tu_archivo_en_spss.sav")
```

* `haven -> SAS` : 
```{r}
#| eval: false
#| echo: true

require(haven)
leer_datos_SAS <- read_sas("ruta/tu_archivo_en_stata.sas7bdat")
```

## Importar

* `readxl -> Excel` : 
```{r}
#| eval: false
#| echo: true

require(readxl)
leer_datos_EXCEL <- read_excel("ruta/tu_archivo_en_excel.xlsx")
```

* `arrow -> Parquet` : 
```{r}
#| eval: false
#| echo: true

require(arrow)
leer_datos_PARQUET <- read_parquet("ruta/tu_archivo_en_parquet.parquet")
```

* `readr -> CSV` : 
```{r}
#| eval: false
#| echo: true

require(readr)
leer_datos_CSV <- read_csv("ruta/tu_archivo_en_CSV.csv")
```


## Comandos iniciales: estructura

<br>

Existen varias formas de observar la estructura de los datos

<br>

```{r}
#| eval: false
#| echo: true

head(tus_datos)        # Muestra las primeras 6 filas del data frame
str(tus_datos)         # Muestra la estructura: tipo de dato de cada columna, dimensiones, etc.
length(tus_datos)      # Devuelve la cantidad de columnas si es un data frame, o de elementos si es un vector/lista
glimpse(tus_datos)     # (dplyr) Muestra estructura en un formato más legible
names(tus_datos)       # Devuelve un vector con los nombres de las columnas

```

<br>

Los comandos `head`, `str`, `names` son del paquete base mientras que `glimpse` es del entorno tidyverse.


## Ejercicio

<span style="color:#FF8D21"> **Tu turno**:</span> 

1. Cree el espacio de trabajo para `Mi primer proyecto`
2. Descargue los siguientes conjuntos de datos desde el repositorio de [GitHub](https://github.com/jgbabativam/AnaDatos/tree/main/datos) y ubiquelos en la carpeta `input/`: 
  - **SPSS**: _ENSIN.sav_, 
  - **Stata**: _COL_2021_LAPOP.dta_, 
  - **Apache Parquet**: _violencia_intrafamiliar.parquet_, 
  - **Excel**: _datos_est_ventas.xlsx_
3. Importe los conjuntos de datos a R y revise su estructura.

# GRACIAS! {background-color="#ddf3ff"}

# Referencias

- Lennert, F. (2022). An(other) introduction to R. [aquí](hhttps://bookdown.org/f_lennert/introduction-to-r/)

- Watt, H. (2024) Data Wrangling Recipes in R. Disponible [aquí](https://bookdown.org/hcwatt99/Data_Wrangling_Recipes_in_R/)

- Wickham, H. (2023) R for data science (2e). Whole game. Disponible [aquí](https://r4ds.had.co.nz/)

- Jadey Ryan. Reproducible reports and presentations with Quarto. Disponible [aquí](https://jadeyryan.quarto.pub/slc-rug-quarto/#/title-slide)

# Citación y derechos de autor

Este material ha sido creado por [Giovany Babativa-Márquez](https://github.com/jgbabativam) y es de libre distribución bajo la licencia [Creative Commons Attribution-ShareAlike 4.0](https://creativecommons.org/licenses/by-sa/4.0/).

Si se copia parcial o totalmente, debe citar la fuente como:

> Babativa-Márquez, J.G. *Materiales del curso de Analítica de Datos*. URL: https://github.com/jgbabativam/AnaDatos.
