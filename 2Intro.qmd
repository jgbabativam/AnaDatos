---
title: "Analítica de datos aplicada a estudios sobre desarrollo"
subtitle: "Introducción a al paquete R"
author: "[Giovany Babativa, PhD](http://jgbabativam.rbind.io/)"
format: 
  gbabativa-revealjs:
    footer: "Diapositivas disponibles en [GitHub](https://github.com/jgbabativam)."
incremental: false
embed-resources: true
highlight-style: dracula
---

## Sobre Mi

<div style="text-align: justify;">

PhD en Estadística, MSc en Analytics & Big Data, MSc en Estadística. Con 20 años de experiencia, actual director de analítica en el CNC, miembro del comité de expertos en pobreza en el DANE y consultor de la División de Estadística de la CEPAL. Ex-decano de la Facultad de Estadística USTA, ex-director de operaciones en el ICFES, PM CEV ...

> Puedes encontrarme en:

- {{< ai google-scholar >}} [Google scholar](https://scholar.google.es/citations?user=2NJRNg8AAAAJ&hl=es)
- {{< fa brands github >}} [GitHub. https://github.com/jgbabativam](https://github.com/jgbabativam)
- {{< fa brands linkedin >}} [linkedin](https://www.linkedin.com/in/giovany-babativa-marquez/?originalSubdomain=co)
- {{< fa solid envelope >}} j.babativamarquez@uniandes.edu.co

</div>

# ORGANIZACIÓN DE DATOS {background-color="#0077b6"}

## Proceso de analítica

```{r, out.width= '100%'}
knitr::include_graphics(here::here("images/Ciclo.png"))
```
[Wickham, H. y otros (2023)](https://r4ds.hadley.nz/)

## Trabajando con R

![](images/trabR.png){fig-align="center"}

## Organización y proyectos en R

* Facilita entornos colaborativos - reproducible y replicable
* Evite la asignación de rutas de trabajo `setwd(mi/ruta/)`
* Cree un R-project y solo revise `getwd()`
* Organice su espacio de trabajo:

```{r, out.width = '25%', fig.align='center'}
knitr::include_graphics(here::here("images/FlujoGB.png"))
```

## Organización de datos

Una de las maneras más sencillas de transformar, organizar y resumir los datos es usando el paquete `dplyr`

![](images/dplyr.png){fig-align="center" width="40%"}

## Organización de datos

::: columns
::: {.column width="20%"}

<br><br><br>

![](images/logo_dplyr.png){fig-align="center" width="80%"}

:::

::: {.column width="80%"}

::: {.incremental}

* `dplyr` es del entorno `tidyverse`
* Pipeline: `|>` o `%>%`
* Seleccionar filas: `filter(condición)`
* Seleccionar columnas: `select(var1, var2, ...)`
* Ordenar conjunto de datos: `arrange(var)` o `arrange(-var)`
* Crear nuevas comunas: `mutate(operación)`
* Agrupar o resumir: `summarise()`

:::

:::

:::

## Operador de tubería `|>`, `%>%`

Permite realizar varias operaciones antes de guardar el resultado en un objeto

::: columns
::: {.column width="50%"}

![](images/pipes.png){fig-align="center" width="80%"}

<span style="font-size:70%;">[Selina Cheng](https://www.rforecology.com/post/how-to-use-pipes/)</span>


:::

::: {.column width="50%"}


```{r}
#| eval: true
#| echo: true

1 |> 
  sum(2, 3)
```


```{r}
#| eval: true
#| echo: true
25 |> 
  sqrt()
```


```{r}
#| eval: true
#| echo: true
"Bienvenid@s" |> 
    paste("al curso de") |> 
    paste("Analítica de Datos")
```

:::

:::


## Seleccionar filas

![](images/filter.png){fig-align="center" width="80%"}

<span style="font-size:70%;">[Allison Horst](https://allisonhorst.com/r-packages-functions/)</span>


## Operadores de comparación en R

| Operador | Definición |
|----------|------------|
| `<`      | es menor que |
| `<=`     | es menor o igual que |
| `>`      | es mayor que |
| `>=`     | es mayor o igual que |
| `==`     | es exactamente igual a |
| `!=`     | es diferente de |

## Operadores lógicos en R

| Operador         | Definición                                         |
|------------------|---------------------------------------------------|
| `x & y`          | x **Y** y                                          |
| `x \| y`         | x **O** y                                           |
| `is.na(x)`       | x es **NA** (valor faltante)                        |
| `!is.na(x)`      | x **no es NA**                                      |
| `x %in% y`       | está x en y                                        |
| `!(x %in% y)`    | no está x en y                                     |



## Ejemplo

Crear un subconjunto de datos desde la ENSIN con los registros de Bogotá y que sean personas de estrato 3 o menos.

```{r}
#| echo: true

library(pacman)

p_load(tidyverse, haven)

url <- "https://github.com/jgbabativam/AnaDatos/raw/main/datos/ENSIN.sav"
ensin <- read_sav(url)

#glimpse(ensin)

#-->  Filtro de registros de Bogotá y estrato menor o igual que 3

df_filt <- ensin |> 
           filter(departamento == 11 & Estrato <= 3)

nrow(df_filt)
```

## Seleccionar columnas

El verbo `select(var1, var2, ...)` permite conservar solo las variables de interés.

<br>

```{r}
#| echo: true

df_filt <- ensin |> 
           filter(departamento == 11 & Estrato <= 3) |> 
           select(llavehog, llaveper, region, departamento, Estrato, edad, sexo)

head(df_filt)
```

# GRACIAS! {background-color="#ddf3ff"}

# Referencias

- R for data science. Section 3. Data visualization. Disponible [aquí](https://r4ds.had.co.nz/)

- Dougherty, J. and Ilyankou, I. (2022) Hands-On Data Visualization. Interactive Storytelling from Spreadsheets to Code. Section 6. Chart Design Principles. Disponible [aquí](https://handsondataviz.org/)

-	Williams, G. (2022) Data Science Desktop Survival Guide. Togaware. Disponible [aquí](https://onepager.togaware.com/introducing-rstudio.html) Chapter 2 introducing R 

- Jadey Ryan. Reproducible reports and presentations with Quarto. Disponible [aquí](https://jadeyryan.quarto.pub/slc-rug-quarto/#/title-slide)

# Citación y derechos de autor

Este material ha sido creado por [Giovany Babativa-Márquez](https://github.com/jgbabativam) y es de libre distribución bajo la licencia [Creative Commons Attribution-ShareAlike 4.0](https://creativecommons.org/licenses/by-sa/4.0/).

Si se copia parcial o totalmente, debe citar la fuente como:

> Babativa-Márquez, J.G. *Materiales del curso de Analítica de Datos*. URL: https://github.com/jgbabativam/AnaDatos.
